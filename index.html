<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />  
<title>API TESTING - Gestió d'usuaris</title>
  <style>
    /* Estilos CSS */
  </style>
</head>
<body>
  <h1>Gestió d'usuaris</h1>

  <h2>Cercar usuari per ID</h2>
  <p>(Buit per llistar els últims creats)</p>
  <input type="text" id="searchId" placeholder="ID usuari">
  <button onclick="searchUser()">cercar</button>
  <br/>
  <br/>
  <div id="searchResult"></div>

  <h2>Crear usuari</h2>
  <input type="text" id="createName" placeholder="Nom">
  <input type="text" id="createGender" placeholder="Gènere">
  <input type="text" id="createEmail" placeholder="Email">
  <input type="text" id="createStatus" placeholder="Estatus">
  <button onclick="createUser()">Crear</button>
  <br/>
  <br/>
  <div id="createResult"></div>

  <h2>Actualizar usuari</h2>
  <input type="text" id="updateId" placeholder="ID usuari">
  <input type="text" id="updateName" placeholder="Nom">
  <input type="text" id="updateGender" placeholder="Gènere">
  <input type="text" id="updateEmail" placeholder="Email">
  <input type="text" id="updateStatus" placeholder="Estatus">
  <button onclick="updateUser()">Actualizar</button>
  <br/>
  <br/>
  <div id="updateResult"></div>

  <h2>Eliminar usuari</h2>
  <input type="text" id="deleteId" placeholder="ID usuari">
  <button onclick="deleteUser()">Eliminar</button>
  <br/>
  <br/>
  <div id="deleteResult"></div>

  <script>
    // Función para buscar un usuario por ID
    function searchUser() {
      const userId = document.getElementById('searchId').value;
      const url = `https://gorest.co.in/public/v2/users/${userId}`;
      const headers = {
        'Accept': 'application/json',
        'Content-Type': 'application/json',
        'Authorization': 'Bearer 415448662ebeffc1317dddd6079940caf9bcb9a2246b1eb54ffa31521aaab604'
      };

      fetch(url, { headers })
        .then(response => response.json())
        .then(data => {
          document.getElementById('searchResult').innerText = JSON.stringify(data);
        })
        .catch(error => console.log(error));
    }

    // Función para crear un usuario
    function createUser() {
      const name = document.getElementById('createName').value;
      const gender = document.getElementById('createGender').value;
      const email = document.getElementById('createEmail').value;
      const status = document.getElementById('createStatus').value;
      const url = 'https://gorest.co.in/public/v2/users';
      const headers = {
        'Accept': 'application/json',
        'Content-Type': 'application/json',
        'Authorization': 'Bearer 415448662ebeffc1317dddd6079940caf9bcb9a2246b1eb54ffa31521aaab604'
      };
      const data = {
        name: name,
        gender: gender,
        email: email,
        status: status
      };

      fetch(url, {
        method: 'POST',
        headers: headers,
        body: JSON.stringify(data)
      })
      .then(response => response.json())
      .then(data => {
        document.getElementById('createResult').innerText = JSON.stringify(data);
      })
      .catch(error => console.log(error));
    }

    // Función para actualizar un usuario
    function updateUser() {
      const userId = document.getElementById('updateId').value;
      const name = document.getElementById('updateName').value;
      const email = document.getElementById('updateEmail').value;
      const gender = document.getElementById('updateGender').value;
      const status = document.getElementById('updateStatus').value;
      const url = `https://gorest.co.in/public/v2/users/${userId}`;
      const headers = {
        'Accept': 'application/json',
        'Content-Type': 'application/json',
        'Authorization': 'Bearer 415448662ebeffc1317dddd6079940caf9bcb9a2246b1eb54ffa31521aaab604'
      };
      const data = {
        name: name,
        email: email,
        status: status,
        gender: gender
      };

      fetch(url, {
        method: 'PATCH',
        headers: headers,
        body: JSON.stringify(data)
      })
      .then(response => response.json())
      .then(data => {
        document.getElementById('updateResult').innerText = JSON.stringify(data);
      })
      .catch(error => console.log(error));
    }

    // Función para eliminar un usuario
    function deleteUser() {
      const userId = document.getElementById('deleteId').value;
      const url = `https://gorest.co.in/public/v2/users/${userId}`;
      const headers = {
        'Accept': 'application/json',
        'Content-Type': 'application/json',
        'Authorization': 'Bearer 415448662ebeffc1317dddd6079940caf9bcb9a2246b1eb54ffa31521aaab604'
      };

      fetch(url, {
        method: 'DELETE',
        headers: headers
      })
      .then(response => {
        document.getElementById('deleteResult').innerText = `Status: ${response.status}`;
      })
      .catch(error => console.log(error));
    }
  </script>
</body>
</html>
